(()=>{"use strict";const t=document.getElementById("canvas-map");t.width=window.innerWidth,t.height=window.innerHeight;const e=t.getContext("2d");function n(t){new class{constructor(t){this.nodes=t,this.start=3,this.end=5}getOtherNodes(t){return this.nodes.filter((e=>t.includes(e.id)?[e.x,e.y]:null))}draw(t){this.nodes.forEach((e=>{const n=this.getOtherNodes(e.bound);new class{constructor(t,e,n,s,i){this.ctx=t,this.id=i,this.centerX=e,this.centerY=n,this.start=!1,this.end=!1,this.otherNodes=s,this.draw(this.ctx),this.getToolTip(this.ctx),this.connect(this.ctx)}draw(t,e="black"){t.beginPath(),t.arc(this.centerX,this.centerY,15,0,2*Math.PI,!1),t.fillStyle=e,t.fill()}connect(t){this.otherNodes.forEach((e=>{new class{constructor(t,e,n,s,i){this.beginX=e,this.beginY=n,this.endX=s,this.endY=i,this.draw(t)}draw(t){t.beginPath(),t.strokeStyle="black",t.moveTo(this.beginX,this.beginY),t.lineTo(this.endX,this.endY),t.stroke()}}(t,this.centerX,this.centerY,e.x,e.y)}))}setStart(){1!=this.end&&(this.start=!0)}setEnd(){1!=this.start&&(this.end=!0)}getToolTip(t){t.beginPath(),t.font="25px Arial",t.fillText(`${this.id}`,this.centerX-5,this.centerY-20)}}(t,e.x,e.y,n,e.id)}))}setStart(t){this.start=t}setEnd(t){this.end=t}defineRoadmap(){filter}}(t).draw(e)}function s(t,e){const n=document.getElementById("submit-message");n.style.color=e,n.style.backgroundColor="white",n.textContent=t}e.scale(.5,.5),e.translate(t.width/2,t.height/2),document.addEventListener("resize",(()=>{t.width=window.innerWidth,t.height=window.innerHeight,n()})),document.addEventListener("DOMContentLoaded",(async function(){n(await async function(){const t=await fetch("/conceptPass"),e=await t.json();return JSON.parse(e)}()),document.getElementById("menu-form").addEventListener("submit",(async t=>{t.preventDefault();const e=t.target.start.value,n=t.target.end.value,i=t.target.ip.value,o=t.target.port.value;console.log(e,n,i,o),await fetch("/sendRoad",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start:e,end:n,ip:i,port:o})}).then((()=>{s("success","green")})).catch((t=>{s(`Error: ${t.message}`,"red")}))}))}))})();